<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.rongcapital.mkt.dao.DataShoppingDao">

	<!-- 所有查询列 -->
	<sql id="QUERY_COLUMN_LIST">
		<![CDATA[ id as id,channel_type as channelType,channel_id as channelId,channel_name as channelName,pay_type as payType,trans_serial as transSerial,order_no as orderNo,trans_time as transTime,product_id as productId,specification as specification,color as color,discount_type as discountType,discount_amt as discountAmt,price as price,amount as amount,inventory as inventory,brand_id as brandId,brand_name as brandName,class1_id as class1Id,class1_name as class1Name,class2_id as class2Id,class2_name as class2Name,class3_id as class3Id,class3_name as class3Name,class4_id as class4Id,class4_name as class4Name,sale_assist_id as saleAssistId,sale_assistance as saleAssistance,settlement_clerk_id as settlementClerkId,settlement_clerk as settlementClerk,identify_no as identifyNo,driving_license as drivingLicense,email as email,mobile as mobile,tel as tel,QQ as qQ,acct_type as acctType,acct_no as acctNo,IDFA as iDFA,IMEI as iMEI,UDID as uDID,phone_mac as phoneMac,status as status,update_time as updateTime,source as source]]>
	</sql>

	<!-- 查询列来源表-->
	<sql id="QUERY_FROM_TABLE"><![CDATA[FROM data_shopping]]></sql>
	
	<!-- 全部条件 -->
	<sql id="QUERY_WHERE_CLAUSE">
		<where>
		    	<if test="id != null"><![CDATA[ AND id = #{id}]]></if>
		    	<if test="channelType != null"><![CDATA[ AND channel_type = #{channelType}]]></if>
		    	<if test="channelId != null"><![CDATA[ AND channel_id = #{channelId}]]></if>
		    	<if test="channelName != null"><![CDATA[ AND channel_name = #{channelName}]]></if>
		    	<if test="payType != null"><![CDATA[ AND pay_type = #{payType}]]></if>
		    	<if test="transSerial != null"><![CDATA[ AND trans_serial = #{transSerial}]]></if>
		    	<if test="orderNo != null"><![CDATA[ AND order_no = #{orderNo}]]></if>
		    	<if test="transTime != null"><![CDATA[ AND trans_time = #{transTime}]]></if>
		    	<if test="productId != null"><![CDATA[ AND product_id = #{productId}]]></if>
		    	<if test="specification != null"><![CDATA[ AND specification = #{specification}]]></if>
		    	<if test="color != null"><![CDATA[ AND color = #{color}]]></if>
		    	<if test="discountType != null"><![CDATA[ AND discount_type = #{discountType}]]></if>
		    	<if test="discountAmt != null"><![CDATA[ AND discount_amt = #{discountAmt}]]></if>
		    	<if test="price != null"><![CDATA[ AND price = #{price}]]></if>
		    	<if test="amount != null"><![CDATA[ AND amount = #{amount}]]></if>
		    	<if test="inventory != null"><![CDATA[ AND inventory = #{inventory}]]></if>
		    	<if test="brandId != null"><![CDATA[ AND brand_id = #{brandId}]]></if>
		    	<if test="brandName != null"><![CDATA[ AND brand_name = #{brandName}]]></if>
		    	<if test="class1Id != null"><![CDATA[ AND class1_id = #{class1Id}]]></if>
		    	<if test="class1Name != null"><![CDATA[ AND class1_name = #{class1Name}]]></if>
		    	<if test="class2Id != null"><![CDATA[ AND class2_id = #{class2Id}]]></if>
		    	<if test="class2Name != null"><![CDATA[ AND class2_name = #{class2Name}]]></if>
		    	<if test="class3Id != null"><![CDATA[ AND class3_id = #{class3Id}]]></if>
		    	<if test="class3Name != null"><![CDATA[ AND class3_name = #{class3Name}]]></if>
		    	<if test="class4Id != null"><![CDATA[ AND class4_id = #{class4Id}]]></if>
		    	<if test="class4Name != null"><![CDATA[ AND class4_name = #{class4Name}]]></if>
		    	<if test="saleAssistId != null"><![CDATA[ AND sale_assist_id = #{saleAssistId}]]></if>
		    	<if test="saleAssistance != null"><![CDATA[ AND sale_assistance = #{saleAssistance}]]></if>
		    	<if test="settlementClerkId != null"><![CDATA[ AND settlement_clerk_id = #{settlementClerkId}]]></if>
		    	<if test="settlementClerk != null"><![CDATA[ AND settlement_clerk = #{settlementClerk}]]></if>
		    	<if test="identifyNo != null"><![CDATA[ AND identify_no = #{identifyNo}]]></if>
		    	<if test="drivingLicense != null"><![CDATA[ AND driving_license = #{drivingLicense}]]></if>
		    	<if test="email != null"><![CDATA[ AND email = #{email}]]></if>
		    	<if test="mobile != null"><![CDATA[ AND mobile = #{mobile}]]></if>
		    	<if test="tel != null"><![CDATA[ AND tel = #{tel}]]></if>
		    	<if test="qQ != null"><![CDATA[ AND QQ = #{qQ}]]></if>
		    	<if test="acctType != null"><![CDATA[ AND acct_type = #{acctType}]]></if>
		    	<if test="acctNo != null"><![CDATA[ AND acct_no = #{acctNo}]]></if>
		    	<if test="iDFA != null"><![CDATA[ AND IDFA = #{iDFA}]]></if>
		    	<if test="iMEI != null"><![CDATA[ AND IMEI = #{iMEI}]]></if>
		    	<if test="uDID != null"><![CDATA[ AND UDID = #{uDID}]]></if>
		    	<if test="phoneMac != null"><![CDATA[ AND phone_mac = #{phoneMac}]]></if>
		    	<if test="status != null"><![CDATA[ AND status = #{status}]]></if>
		    	<if test="updateTime != null"><![CDATA[ AND update_time = #{updateTime}]]></if>
		    	<if test="source != null"><![CDATA[ AND source = #{source}]]></if>
		</where>
	</sql>
	
	<!-- 智能排序与分页 -->
	<sql id="QUERY_ORDER_LIMIT_CONDTION">
		<if test="orderField != null and orderFieldType != null"><![CDATA[ORDER BY ${orderField} ${orderFieldType}]]></if>
		<if test="startIndex != null and startIndex &gt;= 0 and pageSize != null and pageSize &gt; 0"><![CDATA[LIMIT #{startIndex},#{pageSize}]]></if>	
	</sql>

	<!-- 更新列字段,只要不为NULL则更新,除开主键列 -->
	<sql id="UPDATE_COLUMN_SET">
		<set>
		    	<if test="channelType != null"><![CDATA[channel_type = #{channelType},]]></if>
		    	<if test="channelId != null"><![CDATA[channel_id = #{channelId},]]></if>
		    	<if test="channelName != null"><![CDATA[channel_name = #{channelName},]]></if>
		    	<if test="payType != null"><![CDATA[pay_type = #{payType},]]></if>
		    	<if test="transSerial != null"><![CDATA[trans_serial = #{transSerial},]]></if>
		    	<if test="orderNo != null"><![CDATA[order_no = #{orderNo},]]></if>
		    	<if test="transTime != null"><![CDATA[trans_time = #{transTime},]]></if>
		    	<if test="productId != null"><![CDATA[product_id = #{productId},]]></if>
		    	<if test="specification != null"><![CDATA[specification = #{specification},]]></if>
		    	<if test="color != null"><![CDATA[color = #{color},]]></if>
		    	<if test="discountType != null"><![CDATA[discount_type = #{discountType},]]></if>
		    	<if test="discountAmt != null"><![CDATA[discount_amt = #{discountAmt},]]></if>
		    	<if test="price != null"><![CDATA[price = #{price},]]></if>
		    	<if test="amount != null"><![CDATA[amount = #{amount},]]></if>
		    	<if test="inventory != null"><![CDATA[inventory = #{inventory},]]></if>
		    	<if test="brandId != null"><![CDATA[brand_id = #{brandId},]]></if>
		    	<if test="brandName != null"><![CDATA[brand_name = #{brandName},]]></if>
		    	<if test="class1Id != null"><![CDATA[class1_id = #{class1Id},]]></if>
		    	<if test="class1Name != null"><![CDATA[class1_name = #{class1Name},]]></if>
		    	<if test="class2Id != null"><![CDATA[class2_id = #{class2Id},]]></if>
		    	<if test="class2Name != null"><![CDATA[class2_name = #{class2Name},]]></if>
		    	<if test="class3Id != null"><![CDATA[class3_id = #{class3Id},]]></if>
		    	<if test="class3Name != null"><![CDATA[class3_name = #{class3Name},]]></if>
		    	<if test="class4Id != null"><![CDATA[class4_id = #{class4Id},]]></if>
		    	<if test="class4Name != null"><![CDATA[class4_name = #{class4Name},]]></if>
		    	<if test="saleAssistId != null"><![CDATA[sale_assist_id = #{saleAssistId},]]></if>
		    	<if test="saleAssistance != null"><![CDATA[sale_assistance = #{saleAssistance},]]></if>
		    	<if test="settlementClerkId != null"><![CDATA[settlement_clerk_id = #{settlementClerkId},]]></if>
		    	<if test="settlementClerk != null"><![CDATA[settlement_clerk = #{settlementClerk},]]></if>
		    	<if test="identifyNo != null"><![CDATA[identify_no = #{identifyNo},]]></if>
		    	<if test="drivingLicense != null"><![CDATA[driving_license = #{drivingLicense},]]></if>
		    	<if test="email != null"><![CDATA[email = #{email},]]></if>
		    	<if test="mobile != null"><![CDATA[mobile = #{mobile},]]></if>
		    	<if test="tel != null"><![CDATA[tel = #{tel},]]></if>
		    	<if test="qQ != null"><![CDATA[QQ = #{qQ},]]></if>
		    	<if test="acctType != null"><![CDATA[acct_type = #{acctType},]]></if>
		    	<if test="acctNo != null"><![CDATA[acct_no = #{acctNo},]]></if>
		    	<if test="iDFA != null"><![CDATA[IDFA = #{iDFA},]]></if>
		    	<if test="iMEI != null"><![CDATA[IMEI = #{iMEI},]]></if>
		    	<if test="uDID != null"><![CDATA[UDID = #{uDID},]]></if>
		    	<if test="phoneMac != null"><![CDATA[phone_mac = #{phoneMac},]]></if>
		    	<if test="status != null"><![CDATA[status = #{status},]]></if>
		    	<if test="source != null"><![CDATA[source = #{source}]]></if>
		</set>
	</sql>

	<!-- 插入action记录 -->
	<insert id="insert" parameterType="cn.rongcapital.mkt.po.DataShopping" useGeneratedKeys="true" keyProperty="id">
		<![CDATA[
			INSERT INTO data_shopping (channel_type,channel_id,channel_name,pay_type,trans_serial,order_no,trans_time,product_id,specification,color,discount_type,discount_amt,price,amount,inventory,brand_id,brand_name,class1_id,class1_name,class2_id,class2_name,class3_id,class3_name,class4_id,class4_name,sale_assist_id,sale_assistance,settlement_clerk_id,settlement_clerk,identify_no,driving_license,email,mobile,tel,QQ,acct_type,acct_no,IDFA,IMEI,UDID,phone_mac,source)
			VALUES
			(
			  #{channelType},
			  #{channelId},
			  #{channelName},
			  #{payType},
			  #{transSerial},
			  #{orderNo},
			  #{transTime},
			  #{productId},
			  #{specification},
			  #{color},
			  #{discountType},
			  #{discountAmt},
			  #{price},
			  #{amount},
			  #{inventory},
			  #{brandId},
			  #{brandName},
			  #{class1Id},
			  #{class1Name},
			  #{class2Id},
			  #{class2Name},
			  #{class3Id},
			  #{class3Name},
			  #{class4Id},
			  #{class4Name},
			  #{saleAssistId},
			  #{saleAssistance},
			  #{settlementClerkId},
			  #{settlementClerk},
			  #{identifyNo},
			  #{drivingLicense},
			  #{email},
			  #{mobile},
			  #{tel},
			  #{qQ},
			  #{acctType},
			  #{acctNo},
			  #{iDFA},
			  #{iMEI},
			  #{uDID},
			  #{phoneMac},
			  #{source}
			)
		]]>
	</insert>
	
	<!-- 返回插入的编号,在事务开启状态下有效 -->
	<select id="lastSequence" resultType="int"><![CDATA[SELECT LAST_INSERT_ID() AS id]]></select>

	<!-- 修改记录通过主键 -->
	<update id="updateById" parameterType="cn.rongcapital.mkt.po.DataShopping">
		<![CDATA[UPDATE data_shopping]]>
		<include refid="UPDATE_COLUMN_SET"/>
		<![CDATA[WHERE id = #{id}]]>
	</update>

	<!-- 查询,通过主键IN(array) -->
	<select id="selectListByIdList" parameterType="cn.rongcapital.mkt.po.DataShopping" resultType="cn.rongcapital.mkt.po.DataShopping">
		<![CDATA[SELECT]]>
		<include refid="QUERY_COLUMN_LIST"/>
		<include refid="QUERY_FROM_TABLE"/>
		<![CDATA[WHERE id IN]]>
		<foreach collection="list" item="id" open="(" separator="," close=")">
			<![CDATA[#{id}]]>
		</foreach>
	</select>

	<!-- 查询,通过条件 -->
	<select id="selectList" parameterType="cn.rongcapital.mkt.po.DataShopping" resultType="cn.rongcapital.mkt.po.DataShopping">
		<![CDATA[SELECT]]>
		<include refid="QUERY_COLUMN_LIST"/>
		<include refid="QUERY_FROM_TABLE"/>
		<include refid="QUERY_WHERE_CLAUSE"/>
		<include refid="QUERY_ORDER_LIMIT_CONDTION"/>
	</select>

	<!-- 总数查询,通过条件 -->
	<select id="selectListCount" parameterType="cn.rongcapital.mkt.po.DataShopping" resultType="int">
		<![CDATA[SELECT COUNT(id) AS dataCount]]>
		<include refid="QUERY_FROM_TABLE"/>
		<include refid="QUERY_WHERE_CLAUSE"/>
	</select>
	
	<!-- 其它SQL语句 -->
	
	
</mapper>